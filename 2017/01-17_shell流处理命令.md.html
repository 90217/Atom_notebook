<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>01-17_shell流处理命令</title>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(171, 178, 191); overflow: auto; background-color: rgb(40, 44, 52); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(124, 135, 156); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 139, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(124, 135, 156); border-color: rgb(75, 83, 98); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(75, 83, 98); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(75, 83, 98); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(255, 255, 255); background-color: rgb(58, 63, 75); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(49, 54, 63); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(75, 83, 98) rgb(75, 83, 98) rgb(62, 68, 81); background-color: rgb(58, 63, 75); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview .task-list-item-checkbox { position: absolute; margin: 0.25em 0px 0px -1.4em; }
.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(171, 178, 191); overflow: auto; background-color: rgb(40, 44, 52); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(124, 135, 156); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 139, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(124, 135, 156); border-color: rgb(75, 83, 98); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(75, 83, 98); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(75, 83, 98); }
.markdown-preview:not([data-use-github-style]) pre, .markdown-preview:not([data-use-github-style]) code { color: rgb(255, 255, 255); background-color: rgb(58, 63, 75); }
.markdown-preview:not([data-use-github-style]) pre, .markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(49, 54, 63); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(75, 83, 98) rgb(75, 83, 98) rgb(62, 68, 81); background-color: rgb(58, 63, 75); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] pre, .markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre, .markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview del { text-decoration: none; position: relative; }
.markdown-preview del::after { border-bottom: 1px solid black; content: ""; left: 0px; position: absolute; right: 0px; top: 50%; }
.markdown-preview .flash { animation: flash 1s ease-out 1; outline: rgba(255, 0, 0, 0) solid 1px; }
.markdown-preview .flash:not(li) { display: block; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}
.spell-check-corrections {
  width: 25em !important;
}

pre.editor-colors {
  background-color: #282c34;
  color: #abb2bf;
}
pre.editor-colors .line.cursor-line {
  background-color: rgba(153, 187, 255, 0.04);
}
pre.editor-colors .invisible {
  color: #abb2bf;
}
pre.editor-colors .cursor {
  border-left: 2px solid #528bff;
}
pre.editor-colors .selection .region {
  background-color: #3e4451;
}
pre.editor-colors .bracket-matcher .region {
  border-bottom: 1px solid #528bff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .indent-guide {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .wrap-guide {
  background-color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .find-result .region.region.region,
pre.editor-colors .current-result .region.region.region {
  border-radius: 2px;
  background-color: rgba(82, 139, 255, 0.24);
  transition: border-color 0.4s;
}
pre.editor-colors .find-result .region.region.region {
  border: 2px solid transparent;
}
pre.editor-colors .current-result .region.region.region {
  border: 2px solid #528bff;
  transition-duration: .1s;
}
pre.editor-colors .gutter .line-number {
  color: #636d83;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line {
  color: #abb2bf;
  background-color: #2c313a;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right {
  color: #abb2bf;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(224, 82, 82, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
pre.editor-colors .fold-marker:after {
  color: #abb2bf;
}
.syntax--comment {
  color: #5c6370;
  font-style: italic;
}
.syntax--comment .syntax--markup.syntax--link {
  color: #5c6370;
}
.syntax--entity.syntax--name.syntax--type {
  color: #e5c07b;
}
.syntax--entity.syntax--other.syntax--inherited-class {
  color: #98c379;
}
.syntax--keyword {
  color: #c678dd;
}
.syntax--keyword.syntax--control {
  color: #c678dd;
}
.syntax--keyword.syntax--operator {
  color: #abb2bf;
}
.syntax--keyword.syntax--other.syntax--special-method {
  color: #61afef;
}
.syntax--keyword.syntax--other.syntax--unit {
  color: #d19a66;
}
.syntax--storage {
  color: #c678dd;
}
.syntax--storage.syntax--type.syntax--annotation,
.syntax--storage.syntax--type.syntax--primitive {
  color: #c678dd;
}
.syntax--storage.syntax--modifier.syntax--package,
.syntax--storage.syntax--modifier.syntax--import {
  color: #abb2bf;
}
.syntax--constant {
  color: #d19a66;
}
.syntax--constant.syntax--variable {
  color: #d19a66;
}
.syntax--constant.syntax--character.syntax--escape {
  color: #56b6c2;
}
.syntax--constant.syntax--numeric {
  color: #d19a66;
}
.syntax--constant.syntax--other.syntax--color {
  color: #56b6c2;
}
.syntax--constant.syntax--other.syntax--symbol {
  color: #56b6c2;
}
.syntax--variable {
  color: #e06c75;
}
.syntax--variable.syntax--interpolation {
  color: #be5046;
}
.syntax--variable.syntax--parameter {
  color: #abb2bf;
}
.syntax--string {
  color: #98c379;
}
.syntax--string.syntax--regexp {
  color: #56b6c2;
}
.syntax--string.syntax--regexp .syntax--source.syntax--ruby.syntax--embedded {
  color: #e5c07b;
}
.syntax--string.syntax--other.syntax--link {
  color: #e06c75;
}
.syntax--punctuation.syntax--definition.syntax--comment {
  color: #5c6370;
}
.syntax--punctuation.syntax--definition.syntax--method-parameters,
.syntax--punctuation.syntax--definition.syntax--function-parameters,
.syntax--punctuation.syntax--definition.syntax--parameters,
.syntax--punctuation.syntax--definition.syntax--separator,
.syntax--punctuation.syntax--definition.syntax--seperator,
.syntax--punctuation.syntax--definition.syntax--array {
  color: #abb2bf;
}
.syntax--punctuation.syntax--definition.syntax--heading,
.syntax--punctuation.syntax--definition.syntax--identity {
  color: #61afef;
}
.syntax--punctuation.syntax--definition.syntax--bold {
  color: #e5c07b;
  font-weight: bold;
}
.syntax--punctuation.syntax--definition.syntax--italic {
  color: #c678dd;
  font-style: italic;
}
.syntax--punctuation.syntax--section.syntax--embedded {
  color: #be5046;
}
.syntax--punctuation.syntax--section.syntax--method,
.syntax--punctuation.syntax--section.syntax--class,
.syntax--punctuation.syntax--section.syntax--inner-class {
  color: #abb2bf;
}
.syntax--support.syntax--class {
  color: #e5c07b;
}
.syntax--support.syntax--type {
  color: #56b6c2;
}
.syntax--support.syntax--function {
  color: #56b6c2;
}
.syntax--support.syntax--function.syntax--any-method {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--function {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--class,
.syntax--entity.syntax--name.syntax--type.syntax--class {
  color: #e5c07b;
}
.syntax--entity.syntax--name.syntax--section {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--tag {
  color: #e06c75;
}
.syntax--entity.syntax--other.syntax--attribute-name {
  color: #d19a66;
}
.syntax--entity.syntax--other.syntax--attribute-name.syntax--id {
  color: #61afef;
}
.syntax--meta.syntax--class {
  color: #e5c07b;
}
.syntax--meta.syntax--class.syntax--body {
  color: #abb2bf;
}
.syntax--meta.syntax--method-call,
.syntax--meta.syntax--method {
  color: #abb2bf;
}
.syntax--meta.syntax--definition.syntax--variable {
  color: #e06c75;
}
.syntax--meta.syntax--link {
  color: #d19a66;
}
.syntax--meta.syntax--require {
  color: #61afef;
}
.syntax--meta.syntax--selector {
  color: #c678dd;
}
.syntax--meta.syntax--separator {
  background-color: #373b41;
  color: #abb2bf;
}
.syntax--meta.syntax--tag {
  color: #abb2bf;
}
.syntax--underline {
  text-decoration: underline;
}
.syntax--none {
  color: #abb2bf;
}
.syntax--invalid.syntax--deprecated {
  color: #523d14 !important;
  background-color: #e0c285 !important;
}
.syntax--invalid.syntax--illegal {
  color: white !important;
  background-color: #e05252 !important;
}
.syntax--markup.syntax--bold {
  color: #d19a66;
  font-weight: bold;
}
.syntax--markup.syntax--changed {
  color: #c678dd;
}
.syntax--markup.syntax--deleted {
  color: #e06c75;
}
.syntax--markup.syntax--italic {
  color: #c678dd;
  font-style: italic;
}
.syntax--markup.syntax--heading {
  color: #e06c75;
}
.syntax--markup.syntax--heading .syntax--punctuation.syntax--definition.syntax--heading {
  color: #61afef;
}
.syntax--markup.syntax--link {
  color: #56b6c2;
}
.syntax--markup.syntax--inserted {
  color: #98c379;
}
.syntax--markup.syntax--quote {
  color: #d19a66;
}
.syntax--markup.syntax--raw {
  color: #98c379;
}
.syntax--source.syntax--c .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--cpp .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--cs .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--css .syntax--property-name,
.syntax--source.syntax--css .syntax--property-value {
  color: #828997;
}
.syntax--source.syntax--css .syntax--property-name.syntax--support,
.syntax--source.syntax--css .syntax--property-value.syntax--support {
  color: #abb2bf;
}
.syntax--source.syntax--gfm .syntax--markup {
  -webkit-font-smoothing: auto;
}
.syntax--source.syntax--gfm .syntax--link .syntax--entity {
  color: #61afef;
}
.syntax--source.syntax--go .syntax--storage.syntax--type.syntax--string {
  color: #c678dd;
}
.syntax--source.syntax--ini .syntax--keyword.syntax--other.syntax--definition.syntax--ini {
  color: #e06c75;
}
.syntax--source.syntax--java .syntax--storage.syntax--modifier.syntax--import {
  color: #e5c07b;
}
.syntax--source.syntax--java .syntax--storage.syntax--type {
  color: #e5c07b;
}
.syntax--source.syntax--java .syntax--keyword.syntax--operator.syntax--instanceof {
  color: #c678dd;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair {
  color: #e06c75;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair > .syntax--punctuation {
  color: #abb2bf;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator {
  color: #56b6c2;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--delete,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--in,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--of,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--instanceof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--new,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--typeof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--void {
  color: #c678dd;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json {
  color: #e06c75;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation.syntax--string {
  color: #e06c75;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation {
  color: #98c379;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--constant.syntax--language.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--constant.syntax--language.syntax--json {
  color: #56b6c2;
}
.syntax--source.syntax--ruby .syntax--constant.syntax--other.syntax--symbol > .syntax--punctuation {
  color: inherit;
}
.syntax--source.syntax--python .syntax--keyword.syntax--operator.syntax--logical.syntax--python {
  color: #c678dd;
}
.syntax--source.syntax--python .syntax--variable.syntax--parameter {
  color: #d19a66;
}
</style>
  </head>
  <body class='markdown-preview'><h1><strong><em>2017 - 01 - 17 shell流处理命令</em></strong></h1>
<ul>
<li>Three ways finding a string in a file:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;grep&nbsp;-n&nbsp;root&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sed&nbsp;-n&nbsp;&quot;/root/=;/root/p&quot;&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cat&nbsp;-n&nbsp;/etc/passwd&nbsp;|&nbsp;sed&nbsp;-n&nbsp;&#39;/root/p&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;awk&nbsp;&#39;/root/{print&nbsp;NR&quot;:&nbsp;&quot;$0}&#39;&nbsp;/etc/passwd</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">find</span></h1>
<ul>
<li>流式编辑器sed命令修改当前文件夹下所有Makefile：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./&nbsp;-name&nbsp;&#39;Makefile&#39;&nbsp;-exec&nbsp;sed&nbsp;-i&nbsp;&quot;s/CC&nbsp;=&nbsp;gcc/CC&nbsp;=&nbsp;arm-linux-gcc/g&quot;&nbsp;{}&nbsp;\;</span></span></span>
</div></pre>
</li>
<li>insmod所有的.ko文件：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./&nbsp;-name&nbsp;&#39;*.ko&#39;&nbsp;-exec&nbsp;insmod&nbsp;{}&nbsp;\;</span></span></span>
</div></pre>
</li>
<li>以下命令开机加载所有的模块(/etc/init.d/rcS)：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;/ehome/modules/&nbsp;-name&nbsp;*.ko&nbsp;-exec&nbsp;insmod&nbsp;{}&nbsp;\;</span></span></span>
</div></pre>
</li>
<li>find &amp; rm<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;/&nbsp;-type&nbsp;f&nbsp;-name&nbsp;*fetion*&nbsp;-exec&nbsp;rm&nbsp;{}&nbsp;\;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;/&nbsp;-type&nbsp;f&nbsp;-name&nbsp;&quot;*fetion*&quot;&nbsp;|&nbsp;xargs&nbsp;rm&nbsp;-rf&nbsp;{}\;</span></span></span>
</div></pre>
</li>
<li>find &amp; grep<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./&nbsp;-type&nbsp;f&nbsp;-iname&nbsp;&quot;makefile&quot;&nbsp;-exec&nbsp;grep&nbsp;-Hn&nbsp;&quot;VOICE_GMI&quot;&nbsp;{}&nbsp;\;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./*&nbsp;-type&nbsp;f&nbsp;-iname&nbsp;*.c&nbsp;-o&nbsp;-iname&nbsp;*.cc&nbsp;-o&nbsp;-iname&nbsp;*.cpp&nbsp;|&nbsp;xargs&nbsp;grep&nbsp;-Hisn&nbsp;&quot;&quot;&nbsp;{}&nbsp;\;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./*&nbsp;-type&nbsp;f&nbsp;-iname&nbsp;*.h&nbsp;-o&nbsp;-iname&nbsp;*.hh&nbsp;-o&nbsp;-iname&nbsp;*.hpp&nbsp;|&nbsp;xargs&nbsp;grep&nbsp;-Hisn&nbsp;&quot;&quot;&nbsp;{}&nbsp;\;</span></span></span>
</div></pre>
</li>
<li>当前文件夹中所有目录压缩为单独文件<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./*&nbsp;-maxdepth&nbsp;0&nbsp;-type&nbsp;d&nbsp;-exec&nbsp;zip&nbsp;-r&nbsp;{}.zip&nbsp;{}&nbsp;\;</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">grep</span></h1>
<ul>
<li>-s 不输出错误信息</li>
<li>-l 只输出匹配的文件名</li>
<li>-H 显示文件名，用于与find命令组合</li>
<li>查找文件2中文件1没有的行<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>grep&nbsp;-vFf&nbsp;1.txt&nbsp;2.txt</span></span></span>
</div></pre>
</li>
<li>忽略tags文件与二进制文件<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>grep&nbsp;--exclude=tags&nbsp;-rinI&nbsp;&quot;xp_fn_fillerrtone&quot;</span></span></span>
</div></pre>
</li>
<li>其他<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>grep&nbsp;-Ern&nbsp;&#39;^(PRIVATE|PUBLIC)&nbsp;*S16\s*\S*&nbsp;*$|^(PRIVATE|PUBLIC)&nbsp;*S16\s*\S*&nbsp;*\(&#39;&nbsp;zc_bdy4.c</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>grep&nbsp;-Ern&nbsp;&#39;^(PRIVATE|PUBLIC)&nbsp;*S16\s*&#39;$function&#39;&nbsp;*$|^(PRIVATE|PUBLIC)&nbsp;*S16\s*&#39;$function&#39;&nbsp;*\(|^&#39;$function&#39;&nbsp;*\(&#39;&nbsp;zc_bdy4.c</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">awk</span></h1>
<ul>
<li># awk</li>
<li>awk ‘{pattern + action}’ {filenames}</li>
<li>awk [-F field-separator] ‘commands’ input-file(s)</li>
<li>awk -f awk-script-file input-file(s)</li>
</ul>
<h2><span style="color:#ff8000;">awk工作流程：</span></h2>
<ul>
<li>先执行BEGING</li>
<li>然后读取文件，读入有/n换行符分割的一条记录</li>
<li>然后将记录按指定的域分隔符划分域，填充域，$0则表示所有域,$1表示第一个域,$n表示第n个域</li>
<li>随后开始执行模式所对应的动作action</li>
<li>接着开始读入第二条记录，直到所有的记录都读完</li>
<li>最后执行END操作。</li>
</ul>
<h2><span style="color:#ff8000;">示例：</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;{print&nbsp;$1}&#39;&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;{print&nbsp;$1&quot;\t&quot;$7}&#39;&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;BEGIN&nbsp;{print&nbsp;&quot;name,shell&quot;}&nbsp;{print&nbsp;$1&quot;,&quot;$7}&nbsp;END&nbsp;{print&nbsp;&quot;blue,/bin/nosh&quot;}&#39;&nbsp;/etc/passwd</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F:&nbsp;&#39;/root/&#39;&nbsp;/etc/passwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;查找root，并打印整行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F:&nbsp;&#39;/root/{print&nbsp;$7}&#39;&nbsp;/etc/passwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;查找root，并打印第7个分割的字符串</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>echo&nbsp;&quot;this&nbsp;is&nbsp;a&nbsp;test&quot;&nbsp;|&nbsp;awk&nbsp;&#39;$0~/test/{print&nbsp;$0}&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;匹配正则表达式则打印</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;:&nbsp;&#39;$0~/leondgarse/{print&nbsp;$1}&#39;&nbsp;/etc/group&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;查找用户属于的组</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F:&nbsp;&#39;$3~/[0-9][0-9]$/{print&nbsp;$1&quot;\t&quot;$3}&#39;&nbsp;/etc/passwd&nbsp;第三个域以两个数字结束就打印这个记录。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F:&nbsp;&#39;$3&gt;200&nbsp;||&nbsp;$4==65534&#39;&nbsp;/etc/passwd&nbsp;第三个域大于200或者第四个域等于65534，则打印该行。</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;"> awk内置变量：</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;ARGC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;命令行参数个数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;ARGV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;命令行参数排列</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;ENVIRON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;支持队列中系统环境变量的使用</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;FILENAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk浏览的文件名</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;FNR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;浏览文件的记录数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;FS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置输入域分隔符，等价于命令行&nbsp;-F选项</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;NF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;浏览记录的域的个数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;NR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;已读的记录数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;OFS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;输出域分隔符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;ORS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;输出记录分隔符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;RS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;控制记录分隔符</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;{print&nbsp;&quot;filename:&quot;&nbsp;FILENAME&nbsp;&quot;,linenumber:&quot;&nbsp;NR&nbsp;&quot;,columns:&quot;&nbsp;NF&nbsp;&quot;,linecontent:&quot;$0}&#39;&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>printf&nbsp;version:</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;{printf(&quot;filename:&nbsp;%-15s&nbsp;linenumber:&nbsp;%-3s&nbsp;columns:&nbsp;%-3s&nbsp;linecontent:&nbsp;%s\n&quot;,FILENAME,NR,NF,$0)}&#39;&nbsp;/etc/passwd</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;">awk自定义变量：</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;统计/etc/passwd的账户人数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;&#39;BEGIN&nbsp;{count=0;print&nbsp;&quot;[start]user&nbsp;count&nbsp;is&nbsp;&quot;,&nbsp;count}&nbsp;{count=count+1;print&nbsp;$0;}&nbsp;END{print&nbsp;&quot;[end]user&nbsp;count&nbsp;is&nbsp;&quot;,&nbsp;count}&#39;&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;统计某个文件夹下的文件占用的字节数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ls&nbsp;-l&nbsp;|&nbsp;awk&nbsp;&#39;BEGIN&nbsp;{size=0;}&nbsp;{size=size+$5;}&nbsp;END{print&nbsp;&quot;[end]size&nbsp;is&nbsp;&quot;,&nbsp;size}&#39;</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;">awk 正则表达式 ~</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;&#39;BEGIN&nbsp;{info=&quot;this&nbsp;is&nbsp;a&nbsp;test&quot;;&nbsp;if(info&nbsp;~&nbsp;/test/){print&nbsp;&quot;ok&quot;}}&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;包含字符串test</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;&#39;BEGIN&nbsp;{info=&quot;hi&nbsp;i&nbsp;a&quot;;&nbsp;if(info&nbsp;!~&nbsp;&quot;[test]&quot;){print&nbsp;&quot;ok&quot;}}&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;包含test中的任意一个字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;&#39;BEGIN&nbsp;{info=&quot;hi&nbsp;i&nbsp;a&quot;;&nbsp;if(info&nbsp;!~&nbsp;/[test]/){print&nbsp;&quot;ok&quot;}}&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;[&nbsp;,]*&#39;&nbsp;&#39;{printf(&quot;This&nbsp;is&nbsp;a&nbsp;test&nbsp;for&nbsp;%s\n&quot;,&nbsp;$2)}&#39;&nbsp;foo&nbsp;&gt;&nbsp;bar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;正则表达式用于分隔符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;]&#39;&nbsp;&#39;{if($1&nbsp;!~&nbsp;&quot;\\[SSTK&quot;)&nbsp;{print&nbsp;$0}}&#39;&nbsp;cvp.log.sstk&nbsp;&gt;&nbsp;foo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;特殊字符匹配转义使用&nbsp;\\</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;">awk 使用 if / for 语句：</span></h2>
<ul>
<li>打印第四个字段长度大于3的行<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F:&nbsp;&#39;{if&nbsp;(length($4)&gt;3)&nbsp;print&nbsp;$0}&#39;&nbsp;/etc/passwd</span></span></span>
</div></pre>
条件语句，统计某个文件夹下的文件占用的字节数，过滤4096大小的文件(一般都是文件夹)<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ls&nbsp;-l&nbsp;|&nbsp;awk&nbsp;&#39;BEGIN&nbsp;{size=0;print&nbsp;&quot;[start]size&nbsp;is&nbsp;&quot;,&nbsp;size}&nbsp;{if($5!=4096){size=size+$5;}}&nbsp;END{print&nbsp;&quot;[end]size&nbsp;is&nbsp;&quot;,&nbsp;size/1024/1024,&quot;M&quot;}&#39;</span></span></span>
</div></pre>
循环语句，显示/etc/passwd的账户<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&#39;:&#39;&nbsp;&#39;BEGIN&nbsp;{count=0;}&nbsp;{name[count]&nbsp;=&nbsp;$1;count++;}&nbsp;END{for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;NR;&nbsp;i++)&nbsp;print&nbsp;i,&nbsp;name[i]}&#39;&nbsp;/etc/passwd</span></span></span>
</div></pre>
</li>
<li>awk有三种循环:while循环；for循环；special for循环<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;awk&nbsp;&#39;{&nbsp;i&nbsp;=&nbsp;1;&nbsp;while&nbsp;(&nbsp;i&nbsp;&lt;=&nbsp;NF&nbsp;)&nbsp;{&nbsp;print&nbsp;NF,$i;&nbsp;i++}}&#39;&nbsp;test&nbsp;变量的初始值为1，若i小于等于NF(域个数),则执行打印语句，且i增加1。直到i的值大于NF.</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;awk&nbsp;&#39;{for&nbsp;(i&nbsp;=&nbsp;1;&nbsp;i&lt;NF;&nbsp;i++)&nbsp;print&nbsp;NF,$i}&#39;&nbsp;test&nbsp;作用同上</span></span></span>
</div></pre>
</li>
<li>breadkcontinue语句<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>break用于在满足条件的情况下跳出循环；continue用于在满足条件的情况下忽略后面的语句，直接返回循环的顶端。如：</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>{for&nbsp;(&nbsp;x=3;&nbsp;x&lt;=NF;&nbsp;x++)</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;($x&lt;0){print&nbsp;&quot;Bottomed&nbsp;out!&quot;;&nbsp;break}}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>{for&nbsp;(&nbsp;x=3;&nbsp;x&lt;=NF;&nbsp;x++)</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;($x==0){print&nbsp;&quot;Get&nbsp;next&nbsp;item&quot;;&nbsp;continue}}</span></span></span>
</div></pre>
</li>
<li>next语句从输入文件中读取一行，然后从头开始执行awk脚本<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>{&nbsp;if&nbsp;($1&nbsp;~/test/){&nbsp;next&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>else&nbsp;{&nbsp;print&nbsp;}&nbsp;}</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">awk 变量</span></h2>
<ul>
<li>$ awk ‘$1 ~/test/{count = $2 + $3; print count}’ test<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>上式的作用是,awk先扫描第一个域，一旦test匹配，就把第二个域的值加上第三个域的值，并把结果赋值给变量count，最后打印出来</span></span></span>
</div></pre>
</li>
<li>awk可以在命令行中给变量赋值，然后将这个变量传输给awk脚本<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>如$&nbsp;awk&nbsp;-F:&nbsp;-f&nbsp;awkscript&nbsp;month=4&nbsp;year=2004&nbsp;test，上式的month和year都是自定义变量，分别被赋值为4和2004</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>在awk脚本中，这些变量使用起来就象是在脚本中建立的一样</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>注意，如&nbsp;果参数前面出现test，那么在BEGIN语句中的变量就不能被使用</span></span></span>
</div></pre>
</li>
<li>域变量也可被赋值和修改, 如$ awk ‘{$2 = 100 + $1; print }’ test<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>上式表示,如果第二个域不存在，awk将计算表达式100加$1的值，并将其赋值给$2</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>如果第二个域存在，则用表达式的值覆盖$2原来的值</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>再例如：$&nbsp;awk&nbsp;&#39;$1&nbsp;==&nbsp;&quot;root&quot;{$1&nbsp;=&quot;test&quot;;print}&#39;&nbsp;test，如果第一个域的值是“root”，则把它赋值为“test”</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>注意，字符串一定要用双引号</span></span></span>
</div></pre>
</li>
<li>内建变量的使用<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>变量列表在前面已列出，$&nbsp;awk&nbsp;-F:&nbsp;&#39;{IGNORECASE=1;&nbsp;$1&nbsp;==&nbsp;&quot;MARY&quot;{print&nbsp;NR,$1,$2,$NF}&#39;test</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>把IGNORECASE设为1代表忽略大小写，打印第一个域是mary的记录数、第一个域、第二个域和最后一个域</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">awk 其他选项：</span></h2>
<ul>
<li>-v 定义变量值<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>查找长度为3个字母的字符串：</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>printf&nbsp;&quot;%s\n%s\n%s\n&quot;&nbsp;aaaa&nbsp;adf&nbsp;bbb&nbsp;|&nbsp;awk&nbsp;-F&nbsp;&#39;&#39;&nbsp;-vs=3&nbsp;&#39;{for(i=1;&nbsp;i&lt;=NF;i++)if($i~/[a-z]/)num++;&nbsp;if(num==s)print&nbsp;$0;&nbsp;num=0}&#39;</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">awk编程：</span></h2>
<ul>
<li>用户tty号<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>who&nbsp;am&nbsp;i&nbsp;|&nbsp;awk&nbsp;&#39;{print&nbsp;$2}&#39;</span></span></span>
</div></pre>
</li>
<li>查找文件中的字符串，第一项由后两项加中间数字组成<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>printf&nbsp;&quot;%s&nbsp;%s&nbsp;%s\n%s&nbsp;%s&nbsp;%s\n%s&nbsp;%s&nbsp;%s\n%s&nbsp;%s&nbsp;%s\n%s&nbsp;%s&nbsp;%s\n&quot;&nbsp;\</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>abc234o&nbsp;abc&nbsp;o&nbsp;\</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1abc234&nbsp;abc&nbsp;q&nbsp;\</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kjl333&nbsp;jjj&nbsp;d&nbsp;\</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xyz33z&nbsp;&nbsp;xyz&nbsp;z&nbsp;\</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xyz33&nbsp;&nbsp;xyz&nbsp;z&nbsp;|</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;&#39;{var=&quot;^&quot;$2&quot;[0-9]+&quot;$3&quot;$&quot;}$1~var&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>输出：abc234o&nbsp;abc&nbsp;o</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>xyz33z&nbsp;&nbsp;xyz&nbsp;z</span></span></span>
</div></pre>
</li>
<li>打印文件中有且只有三个字母连续出现的行<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-vn=3&nbsp;&#39;{s=$0}gsub(/[a-z]/,&quot;&quot;,s)==n&#39;&nbsp;foo&nbsp;#&nbsp;fail</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-vn=3&nbsp;&#39;gsub(/[a-z]+/,&quot;&amp;amp;&quot;)==1&amp;amp;&amp;amp;gsub(/[a-z]/,&quot;&amp;amp;&quot;)==n&#39;&nbsp;foo&nbsp;#&nbsp;done</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;-F&nbsp;&quot;&quot;&nbsp;-vs=3&nbsp;&#39;{for(i=1;i&lt;=NF;i++)if($i~/:alpha:/)num++;if(num==3)print&nbsp;$0;num=0}&#39;&nbsp;foo&nbsp;#&nbsp;fail</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk&nbsp;--posix&nbsp;&#39;{if($0~/^[^[:alpha:]]*:alpha:{3}[^[:alpha:]]*$/)print&nbsp;$0}&#39;&nbsp;foo&nbsp;#&nbsp;done</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">重定向和管道</span></h2>
<ul>
<li>$ awk ‘BEGIN{ “date” | getline d; print d}’<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>执行linux的date命令，并通过管道输出给getline，然后再把输出赋值给自定义变量d，并打印它</span></span></span>
</div></pre>
</li>
<li>$ awk ‘BEGIN{“date” | getline d; split(d,mon); print mon[2]}’<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>执行shell的date命令，并通过管道输出给getline，然后getline从管道中读取并将输入赋值给d</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>split函数把变量d转化成数组mon，然后打印数组mon的第二个元素</span></span></span>
</div></pre>
</li>
<li>$ awk ‘BEGIN{while( “ls” | getline) print}’<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>命令ls的输出传递给geline作为输入，循环使getline从ls的输出中读取一行，并把它打印到屏幕</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>这里没有输入文件，因为BEGIN块在打开输入文件前执行，所以可以忽略输入文件</span></span></span>
</div></pre>
</li>
<li>$ awk ‘BEGIN{printf “What is your name?”; getline name &lt; “/dev/tty” } $1 ~name {print “Found &quot; name &quot; on line :” NR “.”} END{print “See you,” name “: “$0”.”}’ /etc/passwd<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>在屏幕上打印”What&nbsp;is&nbsp;your&nbsp;name?&quot;,并等待用户应答</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>当一行输入完毕后，getline函数从终端接收该行输入，并把它储存在自定义变量name中</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>如果第一个域匹配变量name的值，print函数就被执行，END块打印See&nbsp;you和name的值</span></span></span>
</div></pre>
</li>
<li>$ awk ‘BEGIN{while (getline &lt; “/etc/passwd” &gt; 0) lc++; print lc}’<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awk将逐行读取文件/etc/passwd的内容，在到达文件末尾前，计数器lc一直增加，当到末尾时，打印lc的值</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>注意，如果文件不存在，getline返回-1，如果到达文件的末尾就返回0，如果读到一行，就返回1</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>所以命令&nbsp;while&nbsp;(getline&nbsp;&lt;&nbsp;&quot;/etc/passwd&quot;)在文件不存在的情况下将陷入无限循环，因为返回-1表示逻辑真</span></span></span>
</div></pre>
</li>
<li>可以在awk中打开一个管道，且同一时刻只能有一个管道存在，通过close()可关闭管道，如：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;awk&nbsp;&#39;{print&nbsp;$1,&nbsp;$2&nbsp;|&nbsp;&quot;sort&quot;&nbsp;}&#39;&nbsp;test&nbsp;END&nbsp;{close(&quot;sort&quot;)}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>awd把print语句的输出通过管道作为linux命令sort的输入,END块执行关闭管道操作</span></span></span>
</div></pre>
</li>
<li>system函数可以在awk中执行linux的命令。如：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;awk&nbsp;&#39;BEGIN{system(&quot;clear&quot;)}&#39;</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">awk内置函数</span></h1>
<ul>
<li>awk内置函数，主要分以下3种类似：算数函数、字符串函数、其它一般函数、时间函数</li>
</ul>
<h2><span style="color:#ff8000;">算术函数</span></h2>
<ul>
<li>以下算术函数执行与 C 语言中名称相同的子例程相同的操作：
<table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cos( x )</td>
<td>返回 x 的余弦；x 是弧度</td>
</tr>
<tr>
<td>sin( x )</td>
<td>返回 x 的正弦；x 是弧度</td>
</tr>
<tr>
<td>exp( x )</td>
<td>返回 x 幂函数</td>
</tr>
<tr>
<td>log( x )</td>
<td>返回 x 的自然对数</td>
</tr>
<tr>
<td>sqrt( x )</td>
<td>返回 x 平方根</td>
</tr>
<tr>
<td>int( x )</td>
<td>返回 x 的截断至整数的值</td>
</tr>
<tr>
<td>rand( )</td>
<td>返回任意数字 n，其中 0 &lt;= n &lt; 1</td>
</tr>
<tr>
<td>srand( [Expr] )</td>
<td>将 rand 函数的种子值设置为 Expr 参数的值，或如果省略 Expr 参数则使用某天的时间。返回先前的种子值</td>
</tr>
</tbody>
</table>
</li>
<li>举例说明：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{OFMT=&quot;%.3f&quot;;fs=sin(1);fe=exp(10);fl=log(10);fi=int(3.1415);print&nbsp;fs,fe,fl,fi;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>0.841&nbsp;22026.466&nbsp;2.303&nbsp;3</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>OFMT&nbsp;设置输出数据格式是保留3位小数</span></span></span>
</div></pre>
获得随机数：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{srand();fr=int(100*rand());print&nbsp;fr;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>78</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{srand();fr=int(100*rand());print&nbsp;fr;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>31</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{srand();fr=int(100*rand());print&nbsp;fr;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>41</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">字符串函数</span></h2>
<ul>
<li>Ere都可以是正则表达式
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>gsub( Ere, Repl, [ In ] )</td>
<td>除了正则表达式所有具体值被替代这点，它和 sub 函数完全一样地执行，</td>
</tr>
<tr>
<td>sub( Ere, Repl, [ In ] )</td>
<td>用 Repl 参数指定的字符串替换 In 参数指定的字符串中的由 Ere 参数指定的扩展正则表达式的第一个具体值。sub 函数返回替换的数量。出现在 Repl 参数指定的字符串中的 &amp;（和符号）由 In 参数指定的与 Ere 参数的指定的扩展正则表达式匹配的字符串替换。如果未指定 In 参数，缺省值是整个记录（$0 记录变量）</td>
</tr>
<tr>
<td>index( String1, String2 )</td>
<td>在由 String1 参数指定的字符串（其中有出现 String2 指定的参数）中，返回位置，从 1 开始编号。如果 String2 参数不在 String1 参数中出现，则返回 0（零）</td>
</tr>
<tr>
<td>length [(String)]</td>
<td>返回 String 参数指定的字符串的长度（字符形式）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）</td>
</tr>
<tr>
<td>blength [(String)]</td>
<td>返回 String 参数指定的字符串的长度（以字节为单位）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）</td>
</tr>
<tr>
<td>substr( String, M, [ N ] )</td>
<td>返回具有 N 参数指定的字符数量子串。子串从 String 参数指定的字符串取得，其字符以 M 参数指定的位置开始。M 参数指定为将 String 参数中的第一个字符作为编号 1。如果未指定 N 参数，则子串的长度将是 M 参数指定的位置到 String 参数的末尾 的长度</td>
</tr>
<tr>
<td>match( String, Ere )</td>
<td>在 String 参数指定的字符串（Ere 参数指定的扩展正则表达式出现在其中）中返回位置（字符形式），从 1 开始编号，或如果 Ere 参数不出现，则返回 0（零）。RSTART 特殊变量设置为返回值。RLENGTH 特殊变量设置为匹配的字符串的长度，或如果未找到任何匹配，则设置为 -1（负一）</td>
</tr>
<tr>
<td>split( String, A, [Ere] )</td>
<td>将 String 参数指定的参数分割为数组元素 A[1], A[2], . . ., A[n]，并返回 n 变量的值。此分隔可以通过 Ere 参数指定的扩展正则表达式进行，或用当前字段分隔符（FS 特殊变量）来进行（如果没有给出 Ere 参数）。除非上下文指明特定的元素还应具有一个数字值，否则 A 数组中的元素用字符串值来创建</td>
</tr>
<tr>
<td>tolower( String )</td>
<td>返回 String 参数指定的字符串，字符串中每个大写字符将更改为小写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义</td>
</tr>
<tr>
<td>toupper( String )</td>
<td>返回 String 参数指定的字符串，字符串中每个小写字符将更改为大写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义</td>
</tr>
<tr>
<td>sprintf(Format, Expr, Expr, . . . )</td>
<td>根据 Format 参数指定的 printf 子例程格式字符串来格式化 Expr 参数指定的表达式并返回最后生成的字符串</td>
</tr>
</tbody>
</table>
</li>
<li>gsub,sub使用<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{info=&quot;this&nbsp;is&nbsp;a&nbsp;test2010test!&quot;;gsub(/[0-9]+/,&quot;!&quot;,info);print&nbsp;info}&#39;  </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>this&nbsp;is&nbsp;a&nbsp;test!test!</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>在&nbsp;info中查找满足正则表达式，/[0-9]+/&nbsp;用””替换，并且替换后的值，赋值给info&nbsp;未给info值，默认是$0</span></span></span>
</div></pre>
</li>
<li>查找字符串（index使用）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[wangsl@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{info=&quot;this&nbsp;is&nbsp;a&nbsp;test2010test!&quot;;print&nbsp;index(info,&quot;test&quot;)?&quot;ok&quot;:&quot;no&nbsp;found&quot;;}&#39;   </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ok</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>未找到，返回0</span></span></span>
</div></pre>
</li>
<li>正则表达式匹配查找(match使用）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[wangsl@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{info=&quot;this&nbsp;is&nbsp;a&nbsp;test2010test!&quot;;print&nbsp;match(info,/[0-9]+/)?&quot;ok&quot;:&quot;no&nbsp;found&quot;;}&#39;          </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ok</span></span></span>
</div></pre>
</li>
<li>截取字符串(substr使用）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[wangsl@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{info=&quot;this&nbsp;is&nbsp;a&nbsp;test2010test!&quot;;print&nbsp;substr(info,4,10);}&#39;                        </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>s&nbsp;is&nbsp;a&nbsp;tes</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>从第&nbsp;4个&nbsp;字符开始，截取10个长度字符串</span></span></span>
</div></pre>
</li>
<li>字符串分割（split使用）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{info=&quot;this&nbsp;is&nbsp;a&nbsp;test&quot;;split(info,tA,&quot;&nbsp;&quot;);print&nbsp;length(tA);for(k&nbsp;in&nbsp;tA){print&nbsp;k,tA[k];}}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>4</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>4&nbsp;test</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>1&nbsp;this</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>2&nbsp;is</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>3&nbsp;a</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>分割info,动态创建数组tA,这里比较有意思，awk&nbsp;for&nbsp;…in&nbsp;循环，是一个无序的循环。&nbsp;并不是从数组下标1…n&nbsp;，因此使用时候需要注意。</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">格式化字符串输出（sprintf使用）</span></h2>
<ul>
<li>格式化字符串格式：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>其中格式化字符串包括两部分内容:&nbsp;一部分是正常字符,&nbsp;这些字符将按原样输出;&nbsp;另一部分是格式化规定字符,&nbsp;以&quot;%&quot;开始,&nbsp;后跟一个或几个规定字符,用来确定输出内容格式。</span></span></span>
</div></pre>
<table>
<thead>
<tr>
<th>格式符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>%d</td>
<td>十进制有符号整数</td>
</tr>
<tr>
<td>%u</td>
<td>十进制无符号整数</td>
</tr>
<tr>
<td>%f</td>
<td>浮点数</td>
</tr>
<tr>
<td>%s</td>
<td>字符串</td>
</tr>
<tr>
<td>%c</td>
<td>单个字符</td>
</tr>
<tr>
<td>%p</td>
<td>指针的值</td>
</tr>
<tr>
<td>%e</td>
<td>指数形式的浮点数</td>
</tr>
<tr>
<td>%x</td>
<td>%X 无符号以十六进制表示的整数</td>
</tr>
<tr>
<td>%o</td>
<td>无符号以八进制表示的整数</td>
</tr>
<tr>
<td>%g</td>
<td>自动选择合适的表示法</td>
</tr>
</tbody>
</table>
</li>
<li>举例说明：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{n1=124.113;n2=-1.224;n3=1.2345;&nbsp;printf(&quot;%.2f,%.2u,%.2g,%X,%o\n&quot;,n1,n2,n3,n1,n1);}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>124.11,18446744073709551615,1.2,7C,174</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">一般函数</span></h2>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>close( Expression )</td>
<td>用同一个带字符串值的 Expression 参数来关闭由 print 或 printf 语句打开的或调用 getline 函数打开的文件或管道。如果文件或管道成功关闭，则返回 0；其它情况下返回非零值。如果打算写一个文件，并稍后在同一个程序中读取文件，则 close 语句是必需的</td>
</tr>
<tr>
<td>system(Command )</td>
<td>执行 Command 参数指定的命令，并返回退出状态。等同于 system 子例程</td>
</tr>
<tr>
<td>Expression</td>
<td>getline [ Variable ]</td>
</tr>
<tr>
<td>getline [ Variable ] &lt; Expression</td>
<td>从 Expression 参数指定的文件读取输入的下一个记录，并将 Variable 参数指定的变量设置为该记录的值。只要流保留打开且 Expression 参数对同一个字符串求值，则对 getline 函数的每次后续调用读取另一个记录。如果未指定 Variable 参数，则 $0 记录变量和 NF 特殊变量设置为从流读取的记录</td>
</tr>
<tr>
<td>getline [ Variable ]</td>
<td>将 Variable 参数指定的变量设置为从当前输入文件读取的下一个输入记录。如果未指定 Variable 参数，则 $0 记录变量设置为该记录的值，还将设置 NF、NR 和 FNR 特殊变量</td>
</tr>
</tbody>
</table>
<ul>
<li>打开外部文件（close用法）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{while(&quot;cat&nbsp;/etc/passwd&quot;|getline){print&nbsp;$0;};close(&quot;/etc/passwd&quot;);}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>root:x:0:0:root:/root:/bin/bash</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>bin:x:1:1:bin:/bin:/sbin/nologin</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>daemon:x:2:2:daemon:/sbin:/sbin/nologin</span></span></span>
</div></pre>
</li>
<li>逐行读取外部文件(getline使用方法）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{while(getline&nbsp;&lt;&nbsp;&quot;/etc/passwd&quot;){print&nbsp;$0;};close(&quot;/etc/passwd&quot;);}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>root:x:0:0:root:/root:/bin/bash</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>bin:x:1:1:bin:/bin:/sbin/nologin</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>daemon:x:2:2:daemon:/sbin:/sbin/nologin</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{print&nbsp;&quot;Enter&nbsp;your&nbsp;name:&quot;;getline&nbsp;name;print&nbsp;name;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Enter&nbsp;your&nbsp;name:</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>chengmo</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>chengmo</span></span></span>
</div></pre>
</li>
<li>调用外部应用程序(system使用方法）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{b=system(&quot;ls&nbsp;-al&quot;);print&nbsp;b;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>total&nbsp;42092</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>drwxr-xr-x&nbsp;14&nbsp;chengmo&nbsp;chengmo    &nbsp;4096&nbsp;09-30&nbsp;17:47&nbsp;.</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>drwxr-xr-x&nbsp;95&nbsp;root  &nbsp;root      &nbsp;4096&nbsp;10-08&nbsp;14:01&nbsp;..</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>b返回值，是执行结果。 </span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">时间函数</span></h2>
<table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mktime( YYYY MM DD HH MM SS[ DST])</td>
<td>生成时间格式</td>
</tr>
<tr>
<td>strftime([format [, timestamp]])</td>
<td>格式化时间输出，将时间戳转为时间字符串, 具体格式，见下表.</td>
</tr>
<tr>
<td>systime()</td>
<td>得到时间戳,返回从1970年1月1日开始到当前时间(不计闰年)的整秒数</td>
</tr>
</tbody>
</table>
<ul>
<li>创建指定时间(mktime使用）<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{tstamp=mktime(&quot;2001&nbsp;01&nbsp;01&nbsp;12&nbsp;12&nbsp;12&quot;);print&nbsp;strftime(&quot;%c&quot;,tstamp);}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>2001年01月01日&nbsp;星期一&nbsp;12时12分12秒 </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{tstamp1=mktime(&quot;2001&nbsp;01&nbsp;01&nbsp;12&nbsp;12&nbsp;12&quot;);tstamp2=mktime(&quot;2001&nbsp;02&nbsp;01&nbsp;0&nbsp;0&nbsp;0&quot;);print&nbsp;tstamp2-tstamp1;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>2634468</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>求2个时间段中间时间差,介绍了strftime使用方法 </span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>[chengmo@centos5&nbsp;~]$&nbsp;awk&nbsp;&#39;BEGIN{tstamp1=mktime(&quot;2001&nbsp;01&nbsp;01&nbsp;12&nbsp;12&nbsp;12&quot;);tstamp2=systime();print&nbsp;tstamp2-tstamp1;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>308201392 </span></span></span>
</div></pre>
</li>
<li>strftime日期和时间格式说明符
<table>
<thead>
<tr>
<th>格式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%a</td>
<td>星期几的缩写(Sun)</td>
</tr>
<tr>
<td>%A</td>
<td>星期几的完整写法(Sunday)</td>
</tr>
<tr>
<td>%b</td>
<td>月名的缩写(Oct)</td>
</tr>
<tr>
<td>%B</td>
<td>月名的完整写法(October)</td>
</tr>
<tr>
<td>%c</td>
<td>本地日期和时间</td>
</tr>
<tr>
<td>%d</td>
<td>十进制日期</td>
</tr>
<tr>
<td>%D</td>
<td>日期 08/20/99</td>
</tr>
<tr>
<td>%e</td>
<td>日期，如果只有一位会补上一个空格</td>
</tr>
<tr>
<td>%H</td>
<td>用十进制表示24小时格式的小时</td>
</tr>
<tr>
<td>%I</td>
<td>用十进制表示12小时格式的小时</td>
</tr>
<tr>
<td>%j</td>
<td>从1月1日起一年中的第几天</td>
</tr>
<tr>
<td>%m</td>
<td>十进制表示的月份</td>
</tr>
<tr>
<td>%M</td>
<td>十进制表示的分钟</td>
</tr>
<tr>
<td>%p</td>
<td>12小时表示法(AM/PM)</td>
</tr>
<tr>
<td>%S</td>
<td>十进制表示的秒</td>
</tr>
<tr>
<td>%U</td>
<td>十进制表示的一年中的第几个星期(星期天作为一个星期的开始)</td>
</tr>
<tr>
<td>%w</td>
<td>十进制表示的星期几(星期天是0)</td>
</tr>
<tr>
<td>%W</td>
<td>十进制表示的一年中的第几个星期(星期一作为一个星期的开始)</td>
</tr>
<tr>
<td>%x</td>
<td>重新设置本地日期(08/20/99)</td>
</tr>
<tr>
<td>%X</td>
<td>重新设置本地时间(12：00：00)</td>
</tr>
<tr>
<td>%y</td>
<td>两位数字表示的年(99)</td>
</tr>
<tr>
<td>%Y</td>
<td>当前月份</td>
</tr>
<tr>
<td>%Z</td>
<td>时区(PDT)</td>
</tr>
<tr>
<td>%%</td>
<td>百分号(%)</td>
</tr>
</tbody>
</table>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">sed - stream editor for filtering and transforming text</span></h1>
<ul>
<li>将文本处理命令应用到每一行</li>
<li>若使用shell变量，应使用&quot;&quot;，而不是’’，并做转义：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>/bin/sed&nbsp;-i&nbsp;&quot;\$a\\Match&nbsp;User&nbsp;$newUserName&quot;&nbsp;/etc/ssh/sshd_config</span></span></span>
</div></pre>
应用到每个文件<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>find&nbsp;./*&nbsp;-type&nbsp;f&nbsp;-exec&nbsp;sed&nbsp;-i&nbsp;&#39;s:/home/leondgarse:~:g&#39;&nbsp;{}&nbsp;\;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用xargs会报错</span></span></span>
</div></pre>
</li>
<li>-e 表示使用sed脚本，后面紧跟sed脚本，可使用 ; 链接多个命令，或者使用多个 -e<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;-e&nbsp;&#39;=&#39;&nbsp;-e&nbsp;&#39;p&#39;&nbsp;foo</span></span></span>
</div></pre>
-n 输出时指定为不打印原文</li>
<li>-i.bak 表示将原文件加后缀.bak作为备份，改动将保存在原文件中，若i后为空，则不做备份</li>
<li>-f 指定使用脚本文件</li>
<li>-r 使用扩展的正则表达式</li>
<li>s/// 替换命令，可以使用不同的分隔符s:::：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;s/foo/bar/&#39;&nbsp;foo&nbsp;替换每一行的第一个foo为bar</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;s:foo:bar:g&#39;&nbsp;foo&nbsp;替换全部foo为bar</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;1,10s/&lt;.*&gt;//g&#39;&nbsp;foo&nbsp;1-10行删除&lt;&gt;包含的语句，会查找最长的匹配，类似：</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>&lt;b&gt;This&lt;/b&gt;&nbsp;is&nbsp;what&nbsp;&lt;b&gt;I&lt;/b&gt;&nbsp;meant&nbsp;将变成&nbsp;meant</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;s/&lt;[^&gt;]*&gt;//g&#39;&nbsp;foo&nbsp;查找以&lt;开头，不包含&gt;，并以&gt;结尾的字符串删除，类似：</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>&lt;b&gt;This&lt;/b&gt;&nbsp;is&nbsp;what&nbsp;&lt;b&gt;I&lt;/b&gt;&nbsp;meant&nbsp;将变成&nbsp;This&nbsp;is&nbsp;what&nbsp;I&nbsp;meant</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;/^$/,/^END/s:foo:bar:g&#39;&nbsp;foo&nbsp;从空行到以END开有的一行，替换foo为bar，指定的查找区间不止一个时，替换所有符合条件的区间</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&#39;&amp;amp;&#39;&nbsp;表示插入整个匹配的规则表达式</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;s/.*/foo:&nbsp;&amp;amp;/&#39;&nbsp;foo&nbsp;在每一行的前面加上foo:</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-ie&nbsp;&#39;s/bar/foo&amp;amp;&amp;amp;&amp;amp;/&#39;&nbsp;foo&nbsp;在所有bar前添加foo，并重复bar三次</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-i.bak&nbsp;-e&nbsp;&#39;s/\([^&nbsp;]*\)&nbsp;\([^&nbsp;]*\)&nbsp;/A:&nbsp;\1&nbsp;B:&nbsp;\2\n/g&#39;&nbsp;foo&nbsp;使用捕获组将每组2个的单词，重新组合成A:&nbsp;B:的形式</span></span></span>
</div></pre>
</li>
<li>d 删除：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;&#39;1d&#39;&nbsp;foo&nbsp;删除第一行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;&#39;2,$d&#39;&nbsp;foo&nbsp;删除第二行到最后一行</span></span></span>
</div></pre>
</li>
<li>p 打印，通常与 -n一起使用，=打印行号：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;1p&#39;&nbsp;foo&nbsp;显示第一行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;/bash/p&#39;&nbsp;foo&nbsp;显示包含bash的行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;/sed/=;/sed/p&#39;&nbsp;foo&nbsp;打印包含sed的行号与行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;-e&nbsp;&#39;s/bash/zsh/g;/zsh/p&#39;&nbsp;foo&nbsp;将bash替换为zsh，并打印这些行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;/bash/p&#39;&nbsp;foo&nbsp;|&nbsp;sed&nbsp;-e&nbsp;&#39;s/bash/zsh/g&#39;&nbsp;只提取包含bash的行，将其中的bash替换为zsh</span></span></span>
</div></pre>
</li>
<li>i 当前行之前插入一行：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-i.bak&nbsp;-e&nbsp;&#39;i\&nbsp;FOO:&nbsp;&#39;&nbsp;foo&nbsp;每一行前面插入新行FOO:</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-i.bak&nbsp;-n&nbsp;-e&nbsp;&#39;i\&nbsp;FOO:&nbsp;&#39;&nbsp;-e&nbsp;&#39;p&#39;&nbsp;foo&nbsp;使用p打印</span></span></span>
</div></pre>
</li>
<li>a 当前行之后插入一行：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-i.bak&nbsp;-e&nbsp;&#39;1a\Insert&nbsp;this&nbsp;line&nbsp;after&nbsp;each&nbsp;line.&nbsp;Thanks!&#39;&nbsp;foo&nbsp;第一行后插入新行</span></span></span>
</div></pre>
</li>
<li>c 替换当前行：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-i.bak&nbsp;-e&nbsp;&#39;c\neeeew!&#39;&nbsp;foo</span></span></span>
</div></pre>
</li>
<li>n 读取下一行<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;1,$n;p&#39;&nbsp;foo&nbsp;显示偶数行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;1,$p;n&#39;&nbsp;foo&nbsp;显示奇数行</span></span></span>
</div></pre>
</li>
<li>addr1,+N Will match addr1 and the N lines following addr1.</li>
<li>addr1,~N Will match addr1 and the lines following addr1 until the next line whose input line number is a multiple of N.<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;&#39;2~2d&#39;&nbsp;file&nbsp;显示奇数行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;1~2p&#39;&nbsp;file&nbsp;显示奇数行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;&#39;1~2d&#39;&nbsp;file&nbsp;显示偶数行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;&#39;2~2p&#39;&nbsp;file&nbsp;显示偶数行</span></span></span>
</div></pre>
</li>
<li>l List out the current line in a ‘‘visually unambiguous’’ form.<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>sed&nbsp;-n&nbsp;l&nbsp;foo&nbsp;Printing&nbsp;&#39;\t&#39;&nbsp;for&nbsp;TAB</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">cut</span></h1>
<ul>
<li>cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出</li>
<li>cut  [-bn] [file] 或 cut [-c] [file]  或  cut [-df] [file]</li>
<li>必须指定 -b、-c 或 -f 标志之一</li>
<li>-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。<br>-c ：以字符为单位进行分割。<br>-d ：自定义分隔符，默认为制表符。<br>-f ：与-d一起使用，指定显示哪个区域。</li>
<li>-s, --only-delimited, do not print lines not containing delimiters</li>
<li>以字节为单位 -b:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;who|cut&nbsp;-b&nbsp;3&nbsp;#&nbsp;extracting&nbsp;3rd&nbsp;character</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;who|cut&nbsp;-b&nbsp;3-5,8&nbsp;#&nbsp;extracting&nbsp;3,4,5,8characters</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;who|cut&nbsp;-b&nbsp;-3&nbsp;#&nbsp;extracting&nbsp;first&nbsp;3&nbsp;characters</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;who|cut&nbsp;-b&nbsp;3-&nbsp;#&nbsp;extracting&nbsp;characters&nbsp;except&nbsp;first&nbsp;3</span></span></span>
</div></pre>
</li>
<li>以字符为单位 -c:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>echo&nbsp;&quot;星期一&quot;&nbsp;|&nbsp;cut&nbsp;-c&nbsp;2&nbsp;#&nbsp;[working?]</span></span></span>
</div></pre>
</li>
<li>域分割 -f:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cut&nbsp;-d:&nbsp;-f1&nbsp;/etc/passwd</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cut&nbsp;-d:&nbsp;-f1-3,5&nbsp;/etc/passwd</span></span></span>
</div></pre>
</li>
<li>only-delimited -s:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cut&nbsp;-d1&nbsp;-f1&nbsp;/etc/passwd&nbsp;#&nbsp;output&nbsp;lines&nbsp;dont&nbsp;contain&nbsp;&#39;1&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cut&nbsp;-d1&nbsp;-sf1&nbsp;/etc/passwd&nbsp;#&nbsp;ignore&nbsp;lines&nbsp;dont&nbsp;contain&nbsp;&#39;1&#39;</span></span></span>
</div></pre>
</li>
<li>如果文件里面的某些域是由若干个空格来间隔的，那么用cut就有点麻烦了，因为cut只擅长处理“以一个字符间隔”的文本内容</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">wc</span></h1>
<ul>
<li>统计给定文件中的字节数、字数、行数。如果没有给出文件名，则从标准输入读取</li>
<li>- c 统计字节数<br>- l 统计行数<br>- w 统计字数</li>
<li>这些选项可以组合使用, 输出列的顺序和数目不受选项的顺序和数目的影响, 总是按下述顺序显示并且每项最多一列<br>        行数、字数、字节数、文件名</li>
<li>如果命令行中没有文件名，则输出中不出现文件名</li>
<li>省略选项wc命令的执行 -lcw</li>
<li>$ wc -lcw foo<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>4&nbsp;4&nbsp;40&nbsp;foo</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">diff</span></h1>
<ul>
<li>diff(differential) 功能说明：比较文件的差异</li>
<li>语 法<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>diff&nbsp;[-abBcdefHilnNpPqrstTuvwy]&nbsp;[-&lt;行数&gt;][-C&nbsp;&lt;行数&gt;][-D&nbsp;&lt;巨集名称&gt;][-I&nbsp;&lt;字符或字符串&gt;][-S&nbsp;&lt;&nbsp;文件&gt;][-W&nbsp;&lt;宽度&gt;][-x&nbsp;&lt;文件或目录&gt;][-X&nbsp;&lt;文件&gt;][--help][--left-&nbsp;column][--suppress-common-line][文件或目录1][文件或目录2]</span></span></span>
</div></pre>
</li>
<li>补充说明<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>diff以逐行的方式，比较文本文件的异同处。所是指定要比较目录，则diff会比较目录中相同文件名的文件，但不会比较其中子目录</span></span></span>
</div></pre>
</li>
<li>参 数：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-&lt;行数&gt;&nbsp;指定要显示多少行的文本。此参数必须与-c或-u参数一并使用。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-a或--text&nbsp;diff预设只会逐行比较文本文件。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-b或--ignore-space-change&nbsp;不检查空格字符的不同。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-B或--ignore-blank-lines&nbsp;不检查空白行。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-c&nbsp;显示全部内文，并标出不同之处。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-C&lt;行数&gt;或--context&lt;行数&gt;&nbsp;与执行&quot;-c-&lt;行数&gt;&quot;指令相同。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-d或--minimal&nbsp;使用不同的演算法，以较小的单位来做比较。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-D&lt;巨集名称&gt;或ifdef&lt;巨集名称&gt;&nbsp;此参数的输出格式可用于前置处理器巨集。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-e或--ed&nbsp;此参数的输出格式可用于ed的script文件。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-f或-forward-ed&nbsp;输出的格式类似ed的script文件，但按照原来文件的顺序来显示不同处。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-H或--speed-large-files&nbsp;比较大文件时，可加快速度。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-l&lt;字符或字符串&gt;或--ignore-matching-lines&lt;字符或字符串&gt;&nbsp;若两个文件在某几行有所不同，而这几行同时都包含了选项中指定的字符或字符串，则不显示这两个文件的差异。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-i或--ignore-case&nbsp;不检查大小写的不同。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-l或--paginate&nbsp;将结果交由pr程序来分页。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-n或--rcs&nbsp;将比较结果以RCS的格式来显示。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-N或--new-file&nbsp;在比较目录时，若文件A仅出现在某个目录中，预设会显示：</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Only&nbsp;in目录：文件A若使用-N参数，则diff会将文件A与一个空白的文件比较。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-p&nbsp;若比较的文件为C语言的程序码文件时，显示差异所在的函数名称。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-P或--unidirect&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ional-new-file&nbsp;与-N类似，但只有当第二个目录包含了一个第一个目录所没有的文件时，才会将这个文件与空白的文件做比较。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-q或--brief&nbsp;仅显示有无差异，不显示详细的信息。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-r或--recursive&nbsp;比较子目录中的文件。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-s或--report-identical-files&nbsp;若没有发现任何差异，仍然显示信息。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-S&lt;文件&gt;或--starting-file&lt;文件&gt;&nbsp;在比较目录时，从指定的文件开始比较。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-t或--expand-tabs&nbsp;在输出时，将tab字符展开。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-T或--initial-tab&nbsp;在每行前面加上tab字符以便对齐。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-u,-U&lt;列数&gt;或--unified=&lt;列数&gt;&nbsp;以合并的方式来显示文件内容的不同。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-v或--version&nbsp;显示版本信息。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-w或--ignore-all-space&nbsp;忽略全部的空格字符。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-W&lt;宽度&gt;或--width&lt;宽度&gt;&nbsp;在使用-y参数时，指定栏宽。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-x&lt;文件名或目录&gt;或--exclude&lt;文件名或目录&gt;&nbsp;不比较选项中所指定的文件或目录。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-X&lt;文件&gt;或--exclude-from&lt;文件&gt;&nbsp;您可以将文件或目录类型存成文本文件，然后在=&lt;文件&gt;中指定此文本文件。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-y或--side-by-side&nbsp;以并列的方式显示文件的异同之处。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>--help&nbsp;显示帮助。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>--left-column&nbsp;在使用-y参数时，若两个文件某一行内容相同，则仅在左侧的栏位显示该行内容。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>--suppress-common-lines&nbsp;在使用-y参数时，仅显示不同之处。</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">rename</span></h1>
<ul>
<li>用字符串替换的方式批量改变文件名</li>
<li>原字符串：将文件名需要替换的字符串</li>
<li>目标字符串：将文件名中含有的原字符替换成目标字符串</li>
<li>文件：指定要改变文件名的文件列表</li>
<li>将main1.c重命名为main.c<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;rename&nbsp;main1.c&nbsp;main.c&nbsp;main1.c</span></span></span>
</div></pre>
</li>
<li>? 可替代单个字符</li>
<li>
<ul>
<li>可替代多个字符</li>
</ul>
</li>
<li>[charset] 可替代charset集中的任意单个字符</li>
<li>$ rename foo foo0 foo?<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>把foo1到foo9的文件重命名为foo01到foo09，重命名的文件只是有4个字符长度名称的文件，文件名中的foo被替换为foo0</span></span></span>
</div></pre>
$ rename foo foo0 foo??<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>foo01到foo99的所有文件都被重命名为foo001到foo099，只重命名5个字符长度名称的文件，文件名中的foo被替换为foo0</span></span></span>
</div></pre>
$ rename foo foo0 foo*<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>foo001到foo278的所有文件都被重命名为foo0001到foo0278，所有以foo开头的文件都被重命名</span></span></span>
</div></pre>
$ rename foo0 foo foo0[2]*<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>从foo0200到foo0278的所有文件都被重命名为foo200到foo278，文件名中的foo0被替换为foo</span></span></span>
</div></pre>
</li>
<li>rename支持正则表达式:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>rename&nbsp;&quot;s/AA/aa/&quot;&nbsp;*&nbsp;//把文件名中的AA替换成aa</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>rename&nbsp;&quot;s//.html//.php/&quot;&nbsp;*&nbsp;//把.html&nbsp;后缀的改成&nbsp;.php后缀</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>rename&nbsp;&quot;s/$//.txt/&quot;&nbsp;*&nbsp;//把所有的文件名都以txt结尾</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>rename&nbsp;&quot;s//.txt//&quot;&nbsp;*&nbsp;//把所有以.txt结尾的文件名的.txt删掉</span></span></span>
</div></pre>
</li>
<li>Ubuntu命令 rename foo foo0 foo? 这样使用不对，报错：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Bareword&nbsp;“foo”&nbsp;not&nbsp;allowed&nbsp;while&nbsp;“strict&nbsp;subs”&nbsp;in&nbsp;use&nbsp;at&nbsp;(eval&nbsp;1)&nbsp;line&nbsp;1.</span></span></span>
</div></pre>
经过Google之后发现有这样的说法：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>On&nbsp;Debian-based&nbsp;distros&nbsp;it&nbsp;takes&nbsp;a&nbsp;perl&nbsp;expression&nbsp;and&nbsp;a&nbsp;list&nbsp;of&nbsp;files.&nbsp;you&nbsp;need&nbsp;to&nbsp;would&nbsp;need&nbsp;to&nbsp;use:&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename&nbsp;‘s/foo/foo0/’&nbsp;foo?</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">sort</span></h1>
<ul>
<li>将文件进行排序，并将排序结果标准输出</li>
<li>参 数：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-b：忽略每行前面开始出的空格字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-c：检查文件是否已经按照顺序排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-d：排序时，处理英文字母、数字及空格字符外，忽略其他的字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-f：排序时，将小写字母视为大写字母</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-i：排序时，除了040至176之间的ASCII字符外，忽略其他的字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-k:  选择以哪个区间进行排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-m：将几个排序号的文件进行合并</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-M：将前面3个字母依照月份的缩写进行排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-n：依照数值的大小排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-o&lt;输出文件&gt;：将排序后的结果存入制定的文件,将结果写入原文件</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-r：以相反的顺序来排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-t&lt;分隔字符&gt;：指定排序时所用的栏位分隔字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-u:&nbsp;输出行中去除重复行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>+&lt;起始栏位&gt;-&lt;结束栏位&gt;：以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;foo</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-u&nbsp;foo</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-r&nbsp;foo</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-n&nbsp;foo</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">-n、-r、-k、-t选项的使用：</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;cat&nbsp;sort.txt</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>AAA:BB:CC</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>aaa:30:1.6</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ccc:50:3.3</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ddd:20:4.2</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>bbb:10:2.5</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>eee:40:5.4</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>eee:60:5.1</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>将BB列按照数字从小到大顺序排列</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-nk&nbsp;2&nbsp;-t:&nbsp;sort.txt</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>将CC列数字从大到小顺序排列</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-nrk&nbsp;3&nbsp;-t:&nbsp;sort.txt</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;">-k选项的语法格式</span></h2>
<ul>
<li>-k选项的语法格式： <br>        FStart.CStart Modifie,        FEnd.CEnd Modifier<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-------Start--------,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------End--------</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>FStart.CStart&nbsp;选项&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FEnd.CEnd&nbsp;选项</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>这个语法格式可以被其中的逗号,分为两大部分，Start部分和End部分。</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>C.Start也是可以省略的，省略的话就表示从本域的开头部分开始</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>FStart.CStart，其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>同理，在End部分中，可以设定FEnd.CEnd，如果省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>如果将CEnd设定为0(零)，也是表示结尾到“域尾”。</span></span></span>
</div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-t&nbsp;&#39;&nbsp;&#39;&nbsp;-k&nbsp;1.2&nbsp;foo</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>只对第一个域的第二个字母进行排序，如果相同的按照第三个域进行排序</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;sort&nbsp;-t&nbsp;&#39;&nbsp;&#39;&nbsp;-k&nbsp;1.2,1.2&nbsp;-nrk&nbsp;3,3</span></span></span>
</div></pre>
</li>
</ul>
<hr>
<h1><span style="color:#ff0000;">expect</span></h1>
<ul>
<li>实现自动和交互式任务进行通信</li>
<li>expect需要Tcl编程语言的支持，要在系统上运行Expect必须首先安装Tcl</li>
<li>第一行使用 #!/usr/bin/expect</li>
</ul>
<h2><span style="color:#ff8000;">命令</span></h2>
<ul>
<li>set, 设置变量</li>
<li>set timeout, 设置后面所有的expect命令的等待响应的超时时间, -1参数用来关闭任何超时设置</li>
<li>spawn, expect内部命令, 开始一个expect交互进程，只有spawn执行的命令结果才会被expect捕捉到<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>spawn&nbsp;ssh&nbsp;-l&nbsp;username&nbsp;192.168.1.1</span></span></span>
</div></pre>
</li>
<li>send, 发送命令,命令字符串“\r”结尾</li>
<li>send_tty</li>
<li>send_user, 显示提示信息到父进程(一般为用户的shell)的标准输出，类似与echo</li>
<li>expect, 等待字符串<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;&quot;]#&quot;&nbsp;{&nbsp;send&nbsp;&quot;touch&nbsp;a\n&quot;&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>&quot;A&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;do&nbsp;a&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;B&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;do&nbsp;b&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;{&nbsp;do&nbsp;timeout&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div></pre>
exp_continue, 继续执行下面的匹配<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>&quot;yes/no&quot;&nbsp;{&nbsp;send&nbsp;&quot;yes\r&quot;;&nbsp;exp_continue}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&quot;Password&quot;&nbsp;{send&nbsp;&quot;$passwd\r&quot;;&nbsp;exp_continue}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div></pre>
</li>
<li>interact, 执行完成后保持交互状态，把控制权交给控制台，可以手工操作, 如果没有登录完成后会退出，而不是留在远程终端上</li>
<li>$argc 参数个数</li>
<li>$argv 参数数组, 从0开始，分别表示第一个,第二个,第三个…参数<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;user&nbsp;[lindex&nbsp;$argv&nbsp;0]</span></span></span>
</div></pre>
$argv0 脚本名字</li>
<li>用于minicom的示例：<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;DEV&nbsp;&quot;/dev/ttyUSB0&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{$argc&gt;0}&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;DEV&nbsp;&quot;/dev/ttyUSB[lindex&nbsp;$argv&nbsp;0]&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>send_user&nbsp;&quot;DEV&nbsp;=&nbsp;$DEV&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>send_user&nbsp;&quot;\n&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>spawn&nbsp;minicom&nbsp;-D&nbsp;$DEV</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">参数:</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>```</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-c,&nbsp;从命令行执行expect脚本</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;-c&nbsp;&#39;expect&nbsp;&quot;\n&quot;&nbsp;{send&nbsp;&quot;pressed&nbsp;enter\n&quot;}&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-re,&nbsp;表示指定的的字符串是一个正则表达式</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;-c&nbsp;&#39;expect&nbsp;-re&nbsp;&quot;\\\[(.*)&quot;&nbsp;{puts&nbsp;&quot;$expect_out(1,string)&quot;}&#39;&nbsp;#&nbsp;capturing&nbsp;[xxx,&nbsp;and&nbsp;print&nbsp;xxx.</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在一个正则表达时中，可以在()中包含若干个部分并通过expect_out数组访问它们</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-i,&nbsp;可以通过来自于标准输入的读命令来交互地执行expect脚本</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;-i&nbsp;arg1&nbsp;arg2&nbsp;arg3</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-d,当执行expect脚本的时候，输出调试信息</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;-d&nbsp;sample.sh</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-D,&nbsp;启动expect调试器</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>选项左边的选项会在调试器启动以前被处理。然后，在调试器启动以后，剩下的命令才会被执行</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;接受一个布尔值的参数。这个参数表示提示器必须马上启动，还是只是初始化调试器，以后再使用它</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect&nbsp;-c&nbsp;&#39;set&nbsp;timeout&nbsp;10&#39;&nbsp;-D&nbsp;1&nbsp;-c&nbsp;&#39;set&nbsp;a&nbsp;1&#39;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-b,&nbsp;逐行地执行expect脚本</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;-b&nbsp;sample.sh</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>```</span></span></span>
</div></pre>
<h2><span style="color:#ff8000;">Tcl函数:</span></h2>
<ul>
<li>set response [string trimright “$raw” &quot; &quot;]<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>lindex,&nbsp;Tcl函数，从列表/数组得到一个特定的元素</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;user&nbsp;[lindex&nbsp;$argv&nbsp;0]</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]用来实现将函数lindex的返回值作为set命令的参数</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>isfile,&nbsp;Tcl函数,&nbsp;验证参数指定的文件存在</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{[file&nbsp;isfile&nbsp;$file]!=1}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>lappend,&nbsp;append&nbsp;string&nbsp;to&nbsp;a&nbsp;string&nbsp;array</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>lappend&nbsp;parametre&nbsp;&quot;[lindex&nbsp;$argv&nbsp;$i]&quot;</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">if判断 / for循环</span></h2>
<ul>
<li>if判断:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{[file&nbsp;isfile&nbsp;$file]!=1}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{&nbsp;{${ops}}&nbsp;==&nbsp;{telnet}&nbsp;}&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>spawn&nbsp;telnet&nbsp;-E&nbsp;${ip}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}&nbsp;elseif&nbsp;{&nbsp;{${ops}}&nbsp;==&nbsp;{ssh}&nbsp;}&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>spawn&nbsp;ssh&nbsp;-l&nbsp;${usrs}&nbsp;${ip}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}&nbsp;else&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>puts&nbsp;{ERROR:&nbsp;Invalid&nbsp;Login&nbsp;Operation:&nbsp;${ops}}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;exit</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div></pre>
</li>
<li>for循环:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>for&nbsp;{set&nbsp;i&nbsp;0}&nbsp;{$i&lt;$argc}&nbsp;{incr&nbsp;i}&nbsp;{&nbsp;puts&nbsp;&quot;arg$i&nbsp;=&nbsp;[lindex&nbsp;$argv&nbsp;$i]&quot;&nbsp;}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;parametre&nbsp;{}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>for&nbsp;{set&nbsp;i&nbsp;0}&nbsp;{$i&lt;$argc}&nbsp;{incr&nbsp;i}&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>lappend&nbsp;parametre&nbsp;&quot;[lindex&nbsp;$argv&nbsp;$i]&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;i&nbsp;0</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>foreach&nbsp;arg&nbsp;$parametre&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>puts&nbsp;&quot;arg$i&nbsp;=&nbsp;$arg&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;incr&nbsp;i</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div></pre>
</li>
</ul>
<h2><span style="color:#ff8000;">Example expect file(exp_timeout.sh):</span></h2>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#!/usr/bin/expect</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;Prompt&nbsp;function&nbsp;with&nbsp;timeout&nbsp;and&nbsp;default.</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>#&nbsp;user&nbsp;input&nbsp;a&nbsp;string&nbsp;within&nbsp;a&nbsp;time&nbsp;limit(argv&nbsp;2),&nbsp;or&nbsp;output&nbsp;default&nbsp;string(argv&nbsp;1)</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{$argc&lt;2}&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>send_user&nbsp;&quot;usage:&nbsp;$argv0&nbsp;prompt&nbsp;default&nbsp;timeout\n&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;exit</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;prompt&nbsp;[lindex&nbsp;$argv&nbsp;0]</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;def&nbsp;[lindex&nbsp;$argv&nbsp;1]</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;response&nbsp;$def</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;tout&nbsp;[lindex&nbsp;$argv&nbsp;2]</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>send_tty&nbsp;&quot;$prompt:&nbsp;&quot;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;timeout&nbsp;$tout</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>expect&nbsp;&quot;\n&quot;&nbsp;{</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>set&nbsp;raw&nbsp;$expect_out(buffer)</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;#&nbsp;remove&nbsp;final&nbsp;carriage&nbsp;return</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&nbsp;&nbsp;set&nbsp;response&nbsp;[string&nbsp;trimright&nbsp;&quot;$raw&quot;&nbsp;&quot;&nbsp;&quot;]</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>if&nbsp;{&quot;$response&quot;&nbsp;==&nbsp;&quot;&quot;}&nbsp;{set&nbsp;response&nbsp;$def}</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>send&nbsp;&quot;$response\n&quot;</span></span></span>
</div></pre>
<ul>
<li>Executing:<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;./exp_timeout.sh&nbsp;&quot;who&#39;s&nbsp;there:&nbsp;&quot;&nbsp;&quot;memememe!&quot;&nbsp;1</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;expect&nbsp;exp_timeout.sh&nbsp;&quot;who&#39;s&nbsp;there:&nbsp;&quot;&nbsp;&quot;me!&quot;&nbsp;5</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;ANSWER=`expect&nbsp;exp_timeout.sh&nbsp;&quot;who&#39;s&nbsp;there:&nbsp;&quot;&nbsp;&quot;memememe!&quot;&nbsp;6`</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>$&nbsp;echo&nbsp;$ANSWER</span></span></span>
</div></pre>
</li>
</ul></body>
</html>
